<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
   <!-- Edge Browser H5 compatibility settings -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 360 Browser H5 Compatibility Settings -->
    <meta name="renderer" content="webkit" />
    <title>Computer Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- import the core file-->
    <script src="../bootstrap3/js/holder.js"></script>
    <link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
    <script src="../bootstrap3/js/bootstrap.js"></script>
    <!-- Font icon -->
    <link rel="stylesheet" href="../bootstrap3/font-awesome-4.7.0/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="../css/top.css" />
    <link rel="stylesheet" type="text/css" href="../css/index.css" />
    <link rel="stylesheet" type="text/css" href="../css/layout.css" />
    <link rel="stylesheet" type="text/css" href="../css/login.css" />
    <link rel="stylesheet" type="text/css" href="../css/footer.css" />
    <script src="../bootstrap3/js/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/autoLogin.js" type="text/javascript"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

</head>


<body>
<!--header-->
<header class="header">
    <img src="../images/index/stumalllogo.png" width="10%" height="10%"/>
    <span class="pull-right"><small>Welcome to </small><b>&nbsp;&nbsp;Computer Store</b></span>
</header>
<!--main body-->
<div class="container mycontent text-left">
    <!--Transparent layer -->
    <div class="loginDiv">
        <p style="margin-top:20px; margin-left:20px;margin-bottom: 20px;font-weight: bolder">User Login</p>
        <!--start of form-->
        <form id="form-login" action="index.html" class="form-horizontal" role="form">
            <!--Username-->
            <div class="form-group">
                <label for="username" class="col-md-3 control-label">Name: </label>
                <div class="col-md-8">
                    <input name="username" type="text" class="form-control" id="username" placeholder="Please input username">
                </div>
            </div>
            <!--password-->
            <div class="form-group">
                <label for="password" class="col-md-3 control-label"> Password: </label>
                <div class="col-md-8">
                    <input name="password" type="text" class="form-control" id="password" placeholder="Please input password">
                </div>
            </div>
            <!-- Remember me-->
            <div class="form-group">
                <div class="col-md-offset-3 col-md-6">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="auto">Auto login
                        </label>
                    </div>
                </div>
            </div>
            <!--Submit button-->
            <div class="form-group">
                <label class="col-md-3 control-label"></label>
                <div class="col-md-8">
                    <input id="btn-login" class="btn btn-primary" type="button" value="Login" />
                    <span class="pull-right"><small>Don't have an account?&nbsp;&nbsp;&nbsp;</small><a href="register.html">Register</a></span>
                </div>
            </div>
        </form>
    </div>
</div>

<!--Start of footer-->
<footer class="footer">
    <!-- Quality Assurance, Customized Service, etc.-->
    <div class="text-center rights container">
        <div class="col-md-offset-2 col-md-2">
            <span class="fa fa-thumbs-o-up"></span>
            <p>Quality Assurance</p>
        </div>
        <div class="col-md-2">
            <span class="fa fa-address-card-o"></span>
            <p>Customized Service</p>
        </div>
        <div class="col-md-2">
            <span class="fa fa-graduation-cap"></span>
            <p>Student Exclusive Offer</p>
        </div>
        <div class="col-md-2">
            <span class="fa fa-bitcoin"></span>
            <p>Exclusive Privileges</p>
        </div>
    </div>


    <!--Contact US, Download App, etc.-->
    <div class="container beforeBottom">
        <div class="col-md-3 callus text-center">
            <ul>
                <li class="singleline"><a href="./buyerAssistance.html" >Buyer Assistance</a></li>
                <li class="singleline"><a href="./beginnersGuide.html" >Beginner's Guide</a></li>
                <li class="singleline"><a href="./serviceGuarantee.html">&nbsp;&nbsp;Service Guarantee</a></li>

            </ul>
        </div>
        <div class="col-md-3">
            <ul>
                <li class="singleline"><a href="./merchantAssistance.html">Merchant Assistance</a></li>
                <li class="singleline"><a href="./merchantRegistration.html">Merchant Registration</a></li>
                <li class="singleline"><a href="./faq.html" >FAQ</a></li>
            </ul>
        </div>
        <div class="col-md-3">
            <ul>
                <li class="singleline"><a href="./ourBrandStory.html" >Our Brand Story</a></li>
                <li class="singleline"><a href="./helpCenter.html" >Help Center 24 Hours</a></li>
                <li class="singleline"><a href="./contactUs.html" >Contact Us 24 Hours</a></li>
            </ul>
        </div>
        <div class="col-md-3">
            <p class="singleline">PC Store Client</p>
            <img src="../images/index/ios.png" class="lf">
            <img src="../images/index/android.png" alt="" class="lf"/>
        </div>
    </div>



    <!-- Bottom of the page - record number #footer -->
    <div class="col-md-12 text-center bottom">
        Copyright Â© 2022 dnsc.cn All Rights Reserved Beijing ICP No. 08963888-45 Mendy Technology Group
        Co., Ltd.  All rights reserved
    </div>
</footer>
<!--End of footer-->


<script type="text/javascript">
    $("#btn-login").click(function() {
        $.ajax({
            url: "/users/login",
            type: "POST",
            data: $("#form-login").serialize(),
            dataType: "json",
            success: function(json) {
                if (json.state == 200) {
                    alert("Login successful! ");
                    $.cookie("avatar", json.data.avatar, {expires: 7});
                    if(json.data.isAdmin == 1){
                        toastr.success('Welcome admin!', 'Login Successful', {
                            timeOut: 2000,
                            positionClass: "toast-top-center",
                            closeButton: true,
                            progressBar: true,
                            extendedTimeOut: 1000
                        });
                        setTimeout(function() {
                            location.href = "admin.html";
                        }, 2000);
                    }else{
                        toastr.info('Welcome Dear Customer!', 'Login Successful', {
                            timeOut: 2000,
                            positionClass: "toast-top-center",
                            closeButton: true,
                            progressBar: true,
                            extendedTimeOut: 1000
                        });
                        setTimeout(function() {
                            location.href = "index.html";
                        }, 2000);
                    }

                } else {
                    toastr.error('Login failed!' + json.message, 'error', {
                        timeOut: 2000,
                        positionClass: "toast-top-center",
                        closeButton: true,
                        progressBar: true,
                        extendedTimeOut: 1000
                    });
                }
            },
            error: function (xhr) {
                toastr.error('An unknown error occurred while logging in!  ' + xhr.status, 'error', {
                    timeOut: 2000,
                    positionClass: "toast-top-center",
                    closeButton: true,
                    progressBar: true,
                    extendedTimeOut: 1000
                });

                // alert("An unknown error occurred while logging in!" +xhr.status);
            }
        });
    });
</script>
</body>
</html>