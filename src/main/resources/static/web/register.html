<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!--edge browser H5 compatible settings-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--360 browser H5 compatible settings-->
    <meta name="renderer" content="webkit"/>
    <title>Computer Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Import core file-->
    <script src="../bootstrap3/js/holder.js"></script>
    <link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
    <script src="../bootstrap3/js/bootstrap.js"></script>
    <!-- font icon -->
    <link rel="stylesheet" href="../bootstrap3/font-awesome-4.7.0/css/font-awesome.css"/>
    <link rel="stylesheet" type="text/css" href="../css/top.css"/>
    <link rel="stylesheet" type="text/css" href="../css/index.css"/>
    <link rel="stylesheet" type="text/css" href="../css/layout.css"/>
    <link rel="stylesheet" type="text/css" href="../css/reg.css"/>
    <link rel="stylesheet" type="text/css" href="../css/footer.css"/>
</head>
<body>
<!--head-->
<header class="header">
    <img src="../images/index/stumalllogo.png" width="10%" height="10%"/>
    <span class="pull-right"><small>Welcome to visit &nbsp;&nbsp;&nbsp;</small><b>Computer Store</b></span>
</header>
<!--Main body-->
<div class="container mycontent text-left" s>
    <!--transparency layer -->
    <div class="regDiv" style="height: auto;margin-top: 60px;">
        <p style="margin-top: 20px; margin-left: 20px;">New User Registration</p>
        <!--Form Start-->
        <form id="form-reg" class="form-horizontal" role="form">
            <!--Username-->
            <div class="form-group">
                <label class="col-md-3 control-label">Name: </label>
                <div class="col-md-8">
                    <input name="username" type="text" class="form-control required-field" placeholder="Please enter username"  >
                </div>
            </div>
            <!--Password-->
            <div class="form-group">
                <label class="col-md-3 control-label"> Password: </label>
                <div class="col-md-8">
                    <input name="password" type="text" class="form-control required-field" placeholder="Please enter a password"  >
                </div>
            </div>

            <!--phone-->
            <div class="form-group">
                <label class="col-md-3 control-label"> Phone: </label>
                <div class="col-md-8">
                    <input name="phone" type="text" class="form-control required-field" placeholder="Please enter your phone" >
                </div>
            </div>

            <!--email-->
            <div class="form-group">
                <label class="col-md-3 control-label"> Email: </label>
                <div class="col-md-8">
                    <input name="email" type="text" class="form-control required-field" placeholder="Please enter your email" >
                </div>
            </div>

            <!--gender-->
            <div class="form-group">
                <label class="col-md-3 control-label"> Gender: </label>
                <div class="col-md-8">
                    <input name="gender" type="text" class="form-control required-field" placeholder="Please enter your gender" >
                </div>
            </div>


            <!--Confirm Password-->
            <div class="form-group">
                <label class="col-md-3 control-label"> Confirm Password: </label>
                <div class="col-md-8">
                    <input name="confirmPassword" type="text" class="form-control required-field" placeholder="Please enter the password again"  >
                </div>
            </div>
            <!--Submit button-->
            <div class="form-group">
                <label class="col-md-3 control-label"></label>
                <div class="col-md-8">
                    <input id="btn-reg" class="btn btn-primary" type="button" value="register now"/>
                    <span class="pull-right"><small>Already have an account? </small><a href="login.html">Login</a></span>
                </div>
            </div>
        </form>
    </div>
</div>

<!--Start of footer-->
<footer class="footer">
    <!-- Quality Assurance, Customized Service, etc.-->
    <div class="text-center rights container">
        <div class="col-md-offset-2 col-md-2">
            <span class="fa fa-thumbs-o-up"></span>
            <p>Quality Assurance</p>
        </div>
        <div class="col-md-2">
            <span class="fa fa-address-card-o"></span>
            <p>Customized Service</p>
        </div>
        <div class="col-md-2">
            <span class="fa fa-graduation-cap"></span>
            <p>Student Exclusive Offer</p>
        </div>
        <div class="col-md-2">
            <span class="fa fa-bitcoin"></span>
            <p>Exclusive Privileges</p>
        </div>
    </div>


    <!--Contact US, Download App, etc.-->
    <div class="container beforeBottom">
        <div class="col-md-3 callus text-center">
            <ul>
                <li class="singleline"><a href="./buyerAssistance.html" >Buyer Assistance</a></li>
                <li class="singleline"><a href="./beginnersGuide.html" >Beginner's Guide</a></li>
                <li class="singleline"><a href="./serviceGuarantee.html">&nbsp;&nbsp;Service Guarantee</a></li>

            </ul>
        </div>
        <div class="col-md-3">
            <ul>
                <li class="singleline"><a href="./merchantAssistance.html">Merchant Assistance</a></li>
                <li class="singleline"><a href="./merchantRegistration.html">Merchant Registration</a></li>
                <li class="singleline"><a href="./faq.html" >FAQ</a></li>
            </ul>
        </div>
        <div class="col-md-3">
            <ul>
                <li class="singleline"><a href="./ourBrandStory.html" >Our Brand Story</a></li>
                <li class="singleline"><a href="./helpCenter.html" >Help Center 24 Hours</a></li>
                <li class="singleline"><a href="./contactUs.html" >Contact Us 24 Hours</a></li>
            </ul>
        </div>
        <div class="col-md-3">
            <p class="singleline">PC Store Client</p>
            <img src="../images/index/ios.png" class="lf">
            <img src="../images/index/android.png" alt="" class="lf"/>
        </div>
    </div>



    <!-- Bottom of the page - record number #footer -->
    <div class="col-md-12 text-center bottom">
        Copyright Â© 2022 dnsc.cn All Rights Reserved Beijing ICP No. 08963888-45 Mendy Technology Group
        Co., Ltd.  All rights reserved
    </div>
</footer>
<!--End of footer-->



<script type="text/javascript">
    //1. Monitor whether the registration button is clicked, if clicked, you can execute a method
    $("#btn-reg"). click(function () {
        // Iterate through each required field
        let allFieldsFilled = true;
        $(".required-field").each(function () {
            // Check if the field is empty
            if ($(this).val().trim() === '') {
                allFieldsFilled = false;
                return false; // BREAK OUT OF EACH LOOP
            }
        });

        // If there are unfilled fields
        if (!allFieldsFilled) {
            alert("Please make sure all fields are filled in!");
            e.preventDefault(); // BLOCK SUBMISSION
            return;
        }


        var password = $("input[name='password']").val();
        var confirmPassword = $("input[name='confirmPassword']").val();

        if (password !== confirmPassword) {
            alert("Passwords do not match!");
            return; //Stop function execution so the form is not submitted
        }

        $("input[name='confirmPassword']").removeAttr('name');


        console.log($("#form-reg").serialize());

        //2. Send ajax() asynchronous request to complete the user's registration function
        $.ajax({
            url:"/users/reg",
            type:"POST",
            data:$("#form-reg").serialize(),
            dataType:"JSON",
            success:function (json) {
                if(json.state == 200){
                    alert("Registration Succeed");
                    location.href="./login.html"
                }else{
                    alert("Registration Failed");
                }
            },
            error:function (xhr) {
                alert("An unknown error occurred while registering!" +xhr.status);
            }
        })

    });



</script>
</body>

</html>